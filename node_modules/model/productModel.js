const pool = require("../db/connect");

// ✅ Create product
async function createProduct({ name, description, sku, price, created_by }) {
    return pool.query("CALL SP_DEALS_PRODUCTCREATION(?, ?, ?, ? ,?)", [
        name,
        description,
        sku,
        price,
        created_by
    ]);
}

// ✅ Get all products
async function getProducts() {
    return pool.query("CALL SP_DEALS_PRODUCTVIEW()");
}

// ✅ Get product by ID
async function getProductById(id) {
    return pool.query("CALL SP_DEALS_PRODUCTVIEWBYID(?)", [id]);
}

// ✅ Update product
async function updateProduct({ id, name, description,sku, price, updated_by }) {
    return pool.query("CALL SP_DEALS_PRODUCTUPDATE(?, ?, ?, ?, ? ?)", [
        id,
        name,
        description,
        sku,
        price,
        updated_by
    ]);
}

// ✅ Delete product
async function deleteProduct(id) {
    return pool.query("CALL SP_DEALS_PRODUCTDELETE(?)", [id]);
}

module.exports = {
    createProduct,
    getProducts,
    getProductById,
    updateProduct,
    deleteProduct
};
